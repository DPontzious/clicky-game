{"ast":null,"code":"module.exports = function (cards, random) {\n  this.reset = function () {\n    this.cards = cards.slice(0);\n    this.length = this.cards.length;\n  };\n\n  this.shuffle = function () {\n    fisherYates(this.cards);\n  };\n\n  this.reset();\n  this.shuffle();\n\n  this.deal = function (numberOfCards, arrayOfHands) {\n    for (var i = 0; i < numberOfCards; i++) {\n      for (var j = 0; j < arrayOfHands.length; j++) {\n        arrayOfHands[j].push(this.cards.pop());\n      }\n    }\n\n    this.length = this.cards.length;\n  };\n\n  this.draw = function (num) {\n    if (!num || num <= 1) {\n      this.length = this.cards.length - 1;\n      return this.cards.pop();\n    }\n\n    var ret = [];\n\n    for (var i = 0; i < num; i++) {\n      ret.push(this.cards.pop());\n    }\n\n    this.length = this.cards.length;\n    return ret;\n  };\n\n  this.drawFromBottomOfDeck = function (num) {\n    if (!num || num < 1) {\n      num = 1;\n    }\n\n    var ret = [];\n\n    for (var i = 0; i < num; i++) {\n      ret.push(this.cards.shift());\n    }\n\n    this.length = this.cards.length;\n\n    if (ret.length === 1) {\n      return ret[0];\n    } else {\n      return ret;\n    }\n  };\n\n  this.drawRandom = function (num) {\n    var _draw = function _draw() {\n      var index = Math.floor(random() * this.cards.length);\n      var card = this.cards[index];\n      this.cards.splice(index, 1);\n      this.length = this.cards.length;\n      return card;\n    };\n\n    if (!num || num <= 1) {\n      return _draw.apply(this);\n    } else {\n      var cards = [];\n\n      for (var i = 0; i < num; i++) {\n        cards.push(_draw.apply(this));\n      }\n\n      return cards;\n    }\n  };\n\n  this.putOnTopOfDeck = function (cards) {\n    if (!cards instanceof Array) this.cards.push(cards);else for (var i = 0; i < cards.length; i++) {\n      this.cards.push(cards[i]);\n    }\n    this.length = this.cards.length;\n  };\n\n  this.putOnBottomOfDeck = function (cards) {\n    if (!cards instanceof Array) this.cards.unshift(cards);else for (var i = 0; i < cards.length; i++) {\n      this.cards.unshift(cards[i]);\n    }\n    this.length = this.cards.length;\n  }; //array shuffling algorithm: http://en.wikipedia.org/wiki/Fisher%E2%80%93Yates_shuffle\n\n\n  function fisherYates(arr) {\n    var i = arr.length;\n    if (i === 0) return false;\n\n    while (--i) {\n      var j = Math.floor(random() * (i + 1));\n      var tempi = arr[i];\n      var tempj = arr[j];\n      arr[i] = tempj;\n      arr[j] = tempi;\n    }\n  }\n};","map":null,"metadata":{},"sourceType":"script"}